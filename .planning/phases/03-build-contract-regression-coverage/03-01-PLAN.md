---
phase: 03-build-contract-regression-coverage
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/check_bof_build.sh
  - README.md
autonomous: true
requirements: [TEST-01]
must_haves:
  truths:
    - Maintainers can run one repeatable local build check that confirms `Bin/bof.o` is produced.
    - Maintainers can run one repeatable containerized build check that confirms `Bin/bof.o` is produced.
    - Build verification output is concise and triage-oriented for fast failure diagnosis.
  artifacts:
    - scripts/check_bof_build.sh
    - README.md
  key_links:
    - `scripts/check_bof_build.sh` invokes canonical Makefile and Docker build paths documented in README.
---

<objective>
Codify repeatable local and containerized build verification for BOF artifact generation.

Purpose: satisfy TEST-01 by turning existing build commands into deterministic script-driven checks plus concise maintainer docs.
Output: one reusable build-check script and aligned README verification usage.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/03-build-contract-regression-coverage/03-RESEARCH.md
@Makefile
@Dockerfile
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add repeatable build verification script for local and container paths</name>
  <files>scripts/check_bof_build.sh</files>
  <action>Create a shell script that runs local and containerized build checks, verifies `Bin/bof.o` exists and is non-empty after each path, and returns concise failure causes with next-step guidance. Keep script deterministic and non-interactive.</action>
  <verify><automated>bash scripts/check_bof_build.sh --local --container</automated></verify>
  <done>Script reliably validates both build paths and fails fast when artifact generation or tooling prerequisites are broken.</done>
</task>

<task type="auto">
  <name>Task 2: Add explicit artifact and environment preflight checks</name>
  <files>scripts/check_bof_build.sh</files>
  <action>Implement preflight checks for required commands (`make`, `nasm`, `x86_64-w64-mingw32-gcc`, and `docker` for container mode), normalize error exits, and include explicit artifact checks for `Bin/bof.o` size/time after each build path.</action>
  <verify><automated>bash scripts/check_bof_build.sh --local --strict</automated></verify>
  <done>Build verification failures report actionable preflight or build-stage cause instead of generic command errors.</done>
</task>

<task type="auto">
  <name>Task 3: Document script usage and expected pass/fail outputs</name>
  <files>README.md</files>
  <action>Update README build section with script-first verification commands, mode options, and expected success/failure output examples so maintainers can run checks consistently before runtime testing.</action>
  <verify><automated>rg -n 'check_bof_build\.sh|Build verification|Bin/bof\.o' README.md</automated></verify>
  <done>README clearly documents the canonical build verification workflow and triage entrypoint.</done>
</task>

</tasks>

<verification>
- TEST-01 is represented in frontmatter and fully covered by tasks.
- Build checks prove `Bin/bof.o` generation for both local and containerized paths.
- Output style supports rapid failure triage.
</verification>

<success_criteria>
- [ ] TEST-01 implemented completely.
- [ ] Local and container build checks are repeatable via script entrypoint.
- [ ] README documents script-first verification workflow.
</success_criteria>

<output>
After completion, create .planning/phases/03-build-contract-regression-coverage/03-01-SUMMARY.md.
</output>
