---
phase: 05-documentation-map-alignment
plan: 02
type: execute
wave: 2
depends_on: [01]
files_modified:
  - .planning/codebase/ARCHITECTURE.md
  - .planning/codebase/CONCERNS.md
  - .planning/codebase/CONVENTIONS.md
  - .planning/codebase/INTEGRATIONS.md
  - .planning/codebase/STACK.md
  - .planning/codebase/TESTING.md
  - .planning/ROADMAP.md
  - .planning/REQUIREMENTS.md
  - .planning/STATE.md
autonomous: true
requirements: [DOCS-03]
must_haves:
  truths:
    - `.planning/codebase/` documents reflect current post-hardening behavior and no longer present resolved issues as active defects.
    - planning metadata across roadmap, requirements, and state is internally consistent after Phase 5 updates.
    - maintainers can trust codebase mapping docs as a current operational reference.
  artifacts:
    - .planning/codebase/ARCHITECTURE.md
    - .planning/codebase/CONCERNS.md
    - .planning/codebase/CONVENTIONS.md
    - .planning/codebase/INTEGRATIONS.md
    - .planning/codebase/STACK.md
    - .planning/codebase/TESTING.md
    - .planning/ROADMAP.md
    - .planning/REQUIREMENTS.md
    - .planning/STATE.md
  key_links:
    - `.planning/codebase/` statements about safety/reliability/testing align with current behavior in `BOF_spawn.cna`, `Src/Bof.c`, and `scripts/check_*.{sh,py}`.
    - `ROADMAP.md`, `REQUIREMENTS.md`, and `STATE.md` counters/status fields remain mutually consistent with on-disk phase artifacts.
---

<objective>
Refresh codebase mapping and planning metadata to satisfy `DOCS-03`.

Purpose: keep planning intelligence accurate after Phases 1-4 hardening and Phase 5 documentation updates.
Output: aligned `.planning/codebase/` docs plus coherent roadmap/requirements/state tracking.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/05-documentation-map-alignment/05-CONTEXT.md
@.planning/phases/05-documentation-map-alignment/05-RESEARCH.md
@.planning/codebase/ARCHITECTURE.md
@.planning/codebase/CONCERNS.md
@.planning/codebase/CONVENTIONS.md
@.planning/codebase/INTEGRATIONS.md
@.planning/codebase/STACK.md
@.planning/codebase/TESTING.md
@BOF_spawn.cna
@Src/Bof.c
@scripts/check_bof_build.sh
@scripts/check_pack_contract.sh
@scripts/check_pack_contract.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refresh stale claims across codebase mapping docs</name>
  <files>.planning/codebase/ARCHITECTURE.md, .planning/codebase/CONCERNS.md, .planning/codebase/CONVENTIONS.md, .planning/codebase/INTEGRATIONS.md</files>
  <action>Update mapping docs so they reflect current hardened behavior (strict-safe defaults, callback gate, exact PPID matching, centralized cleanup posture) and rewrite previously resolved defects from active concerns into current-state notes where applicable.</action>
  <verify><automated>rg -n 'strict-safe|exact case-insensitive|callback blocked|cleanup|GetProcessIdWithNameW|RtlFreeHeap|RtlDestroyProcessParameters' .planning/codebase/ARCHITECTURE.md .planning/codebase/CONCERNS.md .planning/codebase/CONVENTIONS.md .planning/codebase/INTEGRATIONS.md</automated></verify>
  <done>Core mapping docs no longer describe resolved hardening gaps as active unresolved behavior.</done>
</task>

<task type="auto">
  <name>Task 2: Align stack/testing docs with current regression and validation assets</name>
  <files>.planning/codebase/STACK.md, .planning/codebase/TESTING.md</files>
  <action>Update stack/testing docs to include existing script-based regression checks and validation artifacts from Phases 3-4, including build verification and contract regression check workflows.</action>
  <verify><automated>rg -n 'check_bof_build.sh|check_pack_contract.sh|check_pack_contract.py|execution-validation-matrix|ntstatus-troubleshooting|TEST-01|TEST-02|TEST-03' .planning/codebase/STACK.md .planning/codebase/TESTING.md</automated></verify>
  <done>Stack/testing docs accurately represent current verification workflow and available tooling.</done>
</task>

<task type="auto">
  <name>Task 3: Run planning-artifact consistency pass and correct drift</name>
  <files>.planning/ROADMAP.md, .planning/REQUIREMENTS.md, .planning/STATE.md</files>
  <action>Validate roadmap progress rows, requirement traceability/status entries, and state counters/current-focus fields against on-disk phase artifacts. Apply doc-only corrections if drift is found.</action>
  <verify><automated>node /Users/maleick/.codex/get-shit-done/bin/gsd-tools.cjs validate consistency --raw && rg -n 'Phase 5|DOCS-01|DOCS-03|total_plans|completed_plans|Current focus' .planning/ROADMAP.md .planning/REQUIREMENTS.md .planning/STATE.md</automated></verify>
  <done>Planning metadata is coherent and ready for final execution/closure workflows.</done>
</task>

</tasks>

<verification>
- DOCS-03 is represented in frontmatter and fully covered by tasks.
- `.planning/codebase/` docs align with actual post-hardening behavior and tooling.
- Roadmap/requirements/state consistency is validated and corrected where necessary.
</verification>

<success_criteria>
- [ ] DOCS-03 implemented completely.
- [ ] `.planning/codebase/` docs reflect current behavior and validation assets.
- [ ] Planning metadata remains internally consistent after updates.
</success_criteria>

<output>
After completion, create .planning/phases/05-documentation-map-alignment/05-02-SUMMARY.md.
</output>
