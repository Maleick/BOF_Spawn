---
phase: 01-safety-defaults-contract-guardrails
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - BOF_spawn.cna
autonomous: true
requirements: [SAFE-01]
must_haves:
  truths:
    - Default profile keeps RWX disabled unless operator opts in.
    - Default execution method is non-callback and safe-biased.
    - Operator sees concise safety posture details before execution.
  artifacts:
    - BOF_spawn.cna
  key_links:
    - BOF_spawn.cna defaults feed ProcessConfig dialog and both alias execution paths.
---

<objective>
Align CNA defaults and baseline operator messaging with strict-safe posture.

Purpose: make safe behavior the default path without requiring manual operator cleanup.
Output: one authoritative safe default profile used consistently by dialog + aliases.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@.planning/phases/01-safety-defaults-contract-guardrails/01-CONTEXT.md
@.planning/phases/01-safety-defaults-contract-guardrails/01-RESEARCH.md
@BOF_spawn.cna
</context>

<tasks>

<task type="auto">
  <name>Task 1: Normalize strict-safe defaults in CNA</name>
  <files>BOF_spawn.cna</files>
  <action>Set and document default config variables so session start is strict-safe: RWX disabled by default, callback execution not default, and defaults remain script-session persistent. Keep default profile declarations in one contiguous section to reduce drift.</action>
  <verify><automated>rg -n '^\$use_rwx = "false";|^\$exec = "Hijack RIP Direct";' BOF_spawn.cna</automated></verify>
  <done>Fresh session defaults resolve to non-RWX and non-callback execution without additional operator input.</done>
</task>

<task type="auto">
  <name>Task 2: Align dialog copy and profile summary to safe posture</name>
  <files>BOF_spawn.cna</files>
  <action>Update ProcessConfig description and ApplyConfig summary text to reflect the strict-safe default contract and RWX opt-in semantics. Keep output concise and action-first per context.</action>
  <verify><automated>rg -n 'strict-safe|RWX|Execution Method|Configuration Update' BOF_spawn.cna</automated></verify>
  <done>Dialog/help strings and apply-output no longer imply callback-first or RWX-friendly defaults.</done>
</task>

<task type="auto">
  <name>Task 3: Keep alias startup output deterministic</name>
  <files>BOF_spawn.cna</files>
  <action>Ensure both `spawn_beacon` and `spawn_shellcode` print the same normalized policy lines for Block DLL, CFG, RWX, and execution mode before packing arguments. Do not emit extra technical dumps in default mode.</action>
  <verify><automated>rg -n 'spawn_beacon|spawn_shellcode|Block DLL:|Disable CFG:|Use RWX:|Execution:' BOF_spawn.cna</automated></verify>
  <done>Both aliases show the same concise policy snapshot and use the same default-safe values.</done>
</task>

</tasks>

<verification>
- Confirm SAFE-01 is explicitly addressed in frontmatter and task outcomes.
- Confirm default execution method is no longer callback.
- Confirm output style remains concise and operator actionable.
</verification>

<success_criteria>
- [ ] SAFE-01 is fully implemented by this plan.
- [ ] Strict-safe defaults are visible and deterministic in CNA.
- [ ] No hidden default path enables RWX or callback mode.
</success_criteria>

<output>
After completion, create .planning/phases/01-safety-defaults-contract-guardrails/01-01-SUMMARY.md.
</output>
